<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>&lt;map&gt; type extension custom element</title>
    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <!-- Leaflet needs this here in order to find the default image icons -->
    <script src="scripts/lib/leaflet-src.js"></script>
    <link rel="import" href="web-map.html">
    <style>
      /* map must have a defined height and width, can be set either by @height/@width or with css properties */
      web-map {
        height: 350px;
        width: 640px;
      }
      .mapclasstest {
        height: 300px;
        width: 600px;
      }
      .transparency {
        opacity: 0.2;
      }
      map-area#line {
        fill: none; 
        stroke: purple; 
        stroke-width: 5px;
        stroke-opacity: 1.0;
        stroke-linecap: round;
      }
    </style>
  </head>
  <body>
    <div>
      <p>Want to help improve the &lt;map&gt; element? Join the <a href="https://www.w3.org/community/maps4html/">Maps For HTML Community Group</a>, and <a href="https://discourse.wicg.io/c/web-mapping">send us your comments</a>.</p>
      <p>The first map below has no declared projection, and therefore has the default 'Web Mercator'-based coordinate reference system called 'OSMTILE' in MapML:</p>
      <pre>
&lt;web-map zoom="17" lat="45.398043" lon="-75.70683" is="mapml-map" width="700" height="400">
  &lt;map-layer src="http://geogratis.gc.ca/mapml/osm/" label="Open Street Map">&lt;/map-layer&gt;
  &lt;map-layer src="http://geogratis.gc.ca/mapml/cbmt/" label="Canada Base Map">&lt;/map-layer&gt;
  &lt;map-layer src="http://geogratis.gc.ca/mapml/canvec/50k/features/"  label="CanVec+ 031G" class="transparency">&lt;/map-layer&gt;
  &lt;map-layer  id="marker" label="Marker" src="marker.mapml">&lt;/map-layer&gt;
&lt;/web-map>
      </pre>
      <p>Although the "Canada Base Map" layer referenced shares the OSMTILE projection, the service does not serve the zoom level at which the map initially loads, 
        and therefore it is initially disabled  in the layer control.  Zooming out a few levels should result in the Canada Base Map layer being available/enabled.
        The "CanVec+ 031G" layer has the "WGS84" projection, which is a kind of 'wildcard' coordinate reference system that can be overlayed on any projected 
        coordinate reference system known to MapML.  It is initially available/enabled in the layer control because it overlaps the map element's extent and initial zoom level.  
        If you pan the map (too far) or zoom out a few levels, it too should be disabled automatically. 
       
      </p>
      <!-- the @width / @height attributes take precedence over properties, but currently don't change to reflect updates -->
      <web-map zoom="17" lat="45.398043" lon="-75.70683" width="700" height="400" controls>
        <map-layer id="osm" src="http://geogratis.gc.ca/mapml/osm/" label="Open Street Map" checked hidden></map-layer>
        <map-layer id="cbmt" label="Canada Base Map" src="http://geogratis.gc.ca/mapml/cbmt/"></map-layer>
        <map-layer id="canvec" label="CanVec+ 031G" src="http://geogratis.gc.ca/mapml/canvec/50k/features/" class="transparency"></map-layer>
        
        <!-- the HTML author can create MapML files and serve them as layers if they prefer -->
        <map-layer id="marker" label="MapML Marker" src="marker.mapml"></map-layer>
        
        <!-- or the HTML author can create map 'area's (links) within the HTML document -->
<!--        <map-area id="wholemap" href='http://example.com/default/' alt="Default" shape="default" style="fill: salmon; stroke: none; fill-opacity: 0.01"></map-area>-->
        <map-area id="marker2" href='http://example.com/marker/' alt="Marker" coords="265,185" shape="marker"></map-area>
        <map-area id="line" href='http://example.com/line/' alt="Line" coords="275,275,540,107" shape="line"></map-area>

        <map-area id="doughnut" alt="Circle" href='http://example.com/circle/' coords="250,250,25" shape="circle" style="fill: white; stroke: aqua; stroke-width: 5px;fill-opacity: 0.0"></map-area>
        <map-area id="hole" alt="Circle hole - no @href" coords="250,250,7" shape="circle" style="fill: blue; stroke: none;fill-opacity: 0.3;"></map-area>
        <map-area id="rect" href='http://example.com/rectangle/' alt="Rectangle" coords="345,290,415,320" shape="rect" style="fill: greenyellow; stroke: blue; stroke-width: 3px;fill-opacity: 0.4"></map-area>
        <map-area id="poly" href='http://example.com/polygon/' alt="Polygon" coords="392,116,430,100,441,128,405,145" shape="poly" style="fill: pink; stroke: blue; stroke-width: 3px;fill-opacity: 0.4"></map-area>
      </web-map>
      <p>The layers have an inherent projection that is unknown to the client until the URL is fetched.  When the MapML response is parsed, the code enables/disables the layer in the 
      layer control checkbox based on whether the layer shares the projection of the map element, and is visible i.e. within the zoom and bounds of the map.</p>
      <p>The next map declares the 'CBMTILE' projection, which is a coordinate reference system in the Lambert Conformal Conic projection in MapML.  The Open Street Map layer is
      in the Web Mercator (OSMTILE) projection, and is therefore disable/unavailable.</p>
      <pre>
&lt;web-map zoom="17" lat="45.398043" lon="-75.70683" projection="CBMTILE" width="640" height="480" is="mapml-map">
  &lt;map-layer src="http://geogratis.gc.ca/mapml/osm/" label="Open Street Map">&lt;/map-layer&gt;
  &lt;map-layer src="http://geogratis.gc.ca/mapml/cbmtlcc/" label="Canada Base Map">&lt;/map-layer&gt;
  &lt;map-layer src="http://geogratis.gc.ca/mapml/canvec/50k/features/" label="CanVec+ 031G" class="transparency">&lt;/map-layer&gt;
&lt;/web-map>
      </pre>
      <web-map is="mapml-map" zoom="17" lat="45.398043" lon="-75.70683"  projection="CBMTILE" width="640" height="480">
        <map-layer is="mapml-layer" label="Open Street Map" src="http://geogratis.gc.ca/mapml/osm/" ></map-layer>
        <map-layer is="mapml-layer" label="Canada Base Map" src="http://geogratis.gc.ca/mapml/cbmtlcc/" checked></map-layer>
        <map-layer is="mapml-layer" label="CanVec+ 031G" src="http://geogratis.gc.ca/mapml/canvec/50k/features/" class="transparency"></map-layer>
      </web-map>
      <p>The following Arctic Ocean Base Map uses the 'APSTILE' projection, which is a coordinate reference system based on the Polar Stereographic projection in MapML:</p>
      <pre>
&lt;web-map zoom="3" lat="90.0" lon="0.0" projection="APSTILE">
  &lt;map-layer src="http://geogratis.gc.ca/mapml/arctic/" label="Arctic Ocean Base Map">&lt;/map-layer&gt;
&lt;/web-map>
      </pre>
      <web-map zoom="3" lat="90.0" lon="0.0" projection="APSTILE">
        <map-layer label="Arctic Ocean Base Map" src="http://geogratis.gc.ca/mapml/arctic/" checked hidden></map-layer>
        <map-area shape="marker" href='http://example.com/santa/' alt="North Pole" coords="320,175" id="northPole"></map-area>
      </web-map>
      <p>The Arctic Ocean Base Map Terms of Use are available from <a href="http://www.arcgis.com/home/item.html?id=305cb48615d743f89fe70ff3a819e59e">ArcGIS.com</a></p>
    </div>
  </body>
</html>
